## Домашнее задание к занятию 1. «Инфраструктура как код» - Нечаев Владимир

<details>
<summary>Задача 1</summary>

> ### Легенда
> 
> Через час совещание, на котором менеджер расскажет о новом проекте. Начать работу над проектом нужно 
> будет уже сегодня. 
> Сейчас известно, что это будет сервис, который ваша компания будет предоставлять внешним заказчикам.
> Первое время, скорее всего, будет один внешний клиент, со временем внешних клиентов станет больше.
>
> Также по разговорам в компании есть вероятность, что техническое задание ещё не чёткое, что приведёт к большому
> количеству небольших релизов, тестирований интеграций, откатов, доработок, то есть скучно не будет.  
>    
> Вам как DevOps-инженеру будет нужно принять решение об инструментах для организации инфраструктуры.
> В вашей компании уже используются следующие инструменты: 
>
> - остатки Сloud Formation, 
> - некоторые образы сделаны при помощи Packer,
> - год назад начали активно использовать Terraform, 
> - разработчики привыкли использовать Docker, 
> - уже есть большая база Kubernetes-конфигураций, 
> - для автоматизации процессов используется Teamcity, 
> - также есть совсем немного Ansible-скриптов, 
> - ряд bash-скриптов для упрощения рутинных задач.  
>
> На совещании нужно будет выяснить подробности о проекте, чтобы определиться с инструментами:
>
> 1. Какой тип инфраструктуры будем использовать для этого проекта: изменяемый или не изменяемый?
> 1. Будет ли центральный сервер для управления инфраструктурой?
> 1. Будут ли агенты на серверах?
> 1. Будут ли использованы средства для управления конфигурацией или инициализации ресурсов? 
> 
> Так как проект стартует уже сегодня, на совещании нужно будет определиться со всеми этими вопросами.
>
> ### Вам нужно:
>
> 1. Ответить на четыре вопроса из раздела «Легенда».
> 1. Решить, какие инструменты из уже используемых вы хотели бы применить для нового проекта.
> 1. Определиться, хотите ли рассмотреть возможность внедрения новых инструментов для этого проекта.

> Если для ответов на эти вопросы недостаточно информации, напишите, какие моменты уточните на совещании.

</details>

#### Ответ:

> 1. Какой тип инфраструктуры будем использовать для этого проекта: изменяемый или не изменяемый?

Так как ТЗ не четкое логично использовать изменяемый, но когда все будет определено, то лучше перейти на не изменяемый.

> 2. Будет ли центральный сервер для управления инфраструктурой?

Наличие центрального сервера не обязательно.

> 3. Будут ли агенты на серверах?

При использовании инструментов с которыми работает компания наличие агентов не требуется.

> 4. Будут ли использованы средства для управления конфигурацией или инициализации ресурсов? 

Будт использованы для управления конфигураций (Ansible) и инициализации ресурсов (Terraform).

> Решить, какие инструменты из уже используемых вы хотели бы применить для нового проекта.

Packer, Terraform, Docker, Kubernetes, Ansible.

> Определиться, хотите ли рассмотреть возможность внедрения новых инструментов для этого проекта.

Я бы поменял Teamcity на GitLab CI/CD.

<details>
<summary>Задача 2</summary>
  
> [Официальный сайт Terraform](https://www.terraform.io/).   
> В связи с недоступностью ресурсов для загрузки Terraform на территории РФ вы можете воспользоваться VPN или использовать зеркало YandexCloud:      
> [ссылки для установки открытого ПО](https://github.com/netology-code/devops-materials/blob/master/README.md)
>
> Установите Terraform при помощи менеджера пакетов, используемого в вашей операционной системе.
> В виде результата этой задачи приложите вывод команды `terraform --version`.

</details>

#### Ответ:

```bash
nva@Lenovo-G50-80:~/terraform$ terraform --version
Terraform v1.3.7
on linux_amd64
+ provider registry.terraform.io/yandex-cloud/yandex v0.80.0

Your version of Terraform is out of date! The latest version
is 1.4.2. You can update by downloading from https://www.terraform.io/downloads.html
```

<details>
<summary>Задача 3</summary>
  
В какой-то момент вы обновили Terraform до новой версии, например с 0.12 до 0.13. 
Код одного из проектов настолько устарел, что не может работать с версией 0.13. 
Нужно сделать так, чтобы вы могли одновременно использовать последнюю версию Terraform, установленную при помощи
штатного менеджера пакетов, и устаревшую версию 0.12. 

В виде результата этой задачи приложите вывод `--version` двух версий Terraform, доступных на вашем компьютере 
или виртуальной машине.

</details>

#### Ответ:

Скачал файл
````bash
curl -o https://hashicorp-releases.yandexcloud.net/terraform/0.13.0/terraform_0.13.0_linux_amd64.zip
```
Распаковал
````bash
unzip terraform_0.13.0_linux_amd64.zip
```
симлинк на существующий
````bash
sudo ln -s /usr/bin/terraform /usr/bin/terraform_1.3.7
```
симлинк на распакованный
````bash
sudo ln -s /home/nva/terraform-0-13/ /usr/bin/terraform_0.13
```

```bash
nva@Lenovo-G50-80:~/Docker/elasticsearch$ terraform_0.13 --version

Your version of Terraform is out of date! The latest version
is 1.4.2. You can update by downloading from https://www.terraform.io/downloads.html
Terraform v0.13.0
nva@Lenovo-G50-80:~/Docker/elasticsearch$ terraform_1.3.7 --version
Terraform v1.3.7
on linux_amd64

Your version of Terraform is out of date! The latest version
is 1.4.2. You can update by downloading from https://www.terraform.io/downloads.html
```
